define("mod_coursecertificate/manager",["exports","core/notification","core/str","core/templates","core/ajax","core/pending"],(function(_exports,_notification,_str,_templates,_ajax,_pending){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=function(){const automaticsendregion=document.querySelector(SELECTORS_AUTOMATICSENDREGION);automaticsendregion&&automaticsendregion.addEventListener("click",(e=>{e.target.closest(SELECTORS_TOGGLEAUTOMATICSEND)&&(e.preventDefault(),function(automaticsendregion){const{certificateid:certificateid,automaticsend:automaticsend}=automaticsendregion.querySelector(SELECTORS_TOGGLEAUTOMATICSEND).dataset,newstatus="0"===automaticsend;let showhiddenwarning,shownoautosendinfo,pendingPromise;const strings=[{key:"confirmation",component:"admin"},{key:"confirm",component:"moodle"}];newstatus?strings.push({key:"enableautomaticsendpopup",component:"coursecertificate"}):strings.push({key:"disableautomaticsend",component:"coursecertificate"});pendingPromise=new _pending.default("mod_coursecertificate/manager:toggleAutomaticSendgetStrings"),(0,_str.get_strings)(strings).then((_ref=>{let[title,saveLabel,question]=_ref;return pendingPromise.resolve(),_notification.default.saveCancelPromise(title,question,saveLabel)})).then((()=>(pendingPromise=new _pending.default("mod_coursecertificate/manager:toggleAutomaticSend"),setVisibility(SELECTORS_LOADING,!0),_ajax.default.call([{methodname:SERVICES_UPDATEAUTOMATICSEND,args:{id:certificateid,automaticsend:newstatus}}])[0]))).then((result=>(({showhiddenwarning:showhiddenwarning,shownoautosendinfo:shownoautosendinfo}=result),_templates.default.render(TEMPLATES_AUTOMATICSENDALERT,{certificateid:certificateid,automaticsend:newstatus},"")))).then((html=>(_templates.default.replaceNodeContents(automaticsendregion,html,""),setVisibility(SELECTORS_HIDDENWARNING,showhiddenwarning),setVisibility(SELECTORS_NOAUTOSENDINFO,shownoautosendinfo),pendingPromise.resolve()))).catch((e=>{"modal-save-cancel:cancel"!==e.type&&_notification.default.exception(e)}))}(automaticsendregion))}))},_notification=_interopRequireDefault(_notification),_templates=_interopRequireDefault(_templates),_ajax=_interopRequireDefault(_ajax),_pending=_interopRequireDefault(_pending);const SELECTORS_AUTOMATICSENDREGION="[data-region='automaticsend-alert']",SELECTORS_HIDDENWARNING=".hidden-warning",SELECTORS_NOAUTOSENDINFO=".noautosend-info",SELECTORS_TOGGLEAUTOMATICSEND="[data-action='toggle-automaticsend']",SELECTORS_LOADING=".loading-overlay",TEMPLATES_AUTOMATICSENDALERT="mod_coursecertificate/automaticsend_alert",SERVICES_UPDATEAUTOMATICSEND="mod_coursecertificate_update_automaticsend";function setVisibility(selector,visible){document.querySelector(selector).classList.toggle("invisible",!visible)}}));

//# sourceMappingURL=manager.min.js.map